---
layout: post
title: C#/C++의 복사에 대한 고찰
---

[Jekyll] 이것이 C#이다 책을 보며 7장 5번째 챕터에서 나온 복사에 대해 읽으며 갑자기 첫 글을 쓰게 되었다. 원래부터 준비해온 블로그지만 아직 완성은 안되어 있기에 임시적으로 글을 먼저 작성해볼까 한다.

C++ 클래스에서는 기본적으로 C++ 컴파일러에서 제공해주는 디폴트 복사 생성자가 존재한다.

이는 얕은 복사를 사용하며 클래스 내부에 포인터를 통한 접근을 하는 변수,또는 인스턴스가 존재할 경우 그 변수의 주소만을 가져오기 때문에 그 변수를 삭제 또는 인스턴스를 delete 하는 경우 문제가 생길 수도 있다.

이는 예전에 C++에서 공부할 때 공부했던 내용이였다.

하지만 C#에서는 stack에 클래스의 주소를 보관 그리고 실질적 클래스 내부 변수등은 힙에 저장이 된다. 그리고 내가 클래스를 복사 해올 경우 stack에 존재하는 주소만을 복사해 첫 클래스를 delete를 할시에 문제가 생길수도있다.라는 글이였다.

실질적으로 그렇다면 C#과 C++에서 사용되는 복사에 대한 의미가 다르지 않은가?

물론 참조할 대상을 Lost 했다는 의미는 동일하다. 하지만 그 내부의 차이는 중요하다고 생각한다. 물론 구현은 동일하게 복사 생성자를 생성하는 것이 답이긴한다.

하지만 C++에서는 그냥 디폴트 복사 생성자를 쓰거나 복사 생성자를 만들어 사용하는 반면 C#에서는 복사 생성자를 IClonealbe 인터페이스를 상속받고 Clone 메소드를 사용하거나 Deep Copy 메소드를 따로 작성 하는 차이 또한 존재한다.

그냥 그 차이일 뿐이다. 하지만 천천히 글을 작성하며 나중에 잊을 수도 있는 내용을 기억할려고 한다.
